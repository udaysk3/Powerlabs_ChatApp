{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Left Column: Conversation List -->
        <div class="col-md-3 conversation-list-column">
            <h4 id="conversation-header">Messages</h4>
            <div class="search-container mb-3">
                <input type="text" id="search-conversations" class="form-control" placeholder="Search messages">
            </div>
            <div id="conversation-list" class="list-group">
                <!-- Conversations will be loaded here -->
            </div>
        </div>

        <!-- Middle Column: Chat Window -->
        <div class="col-md-6 chat-window-column">
            <div id="chat-header">
                <h4 id="current-chat-name"></h4>
                <p id="current-chat-subtitle"></p>
            </div>
            <div id="message-list" class="messages-container">
                <!-- Messages will be loaded here -->
            </div>
            <div class="message-input-container">
                <div class="input-group">
                    <input type="text" id="message-input" class="form-control" placeholder="Type your message...">
                    <div class="input-group-append">
                        <button id="send-button" class="btn btn-primary">
                            Send<i class="fa fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Contextual Information -->
        <div class="col-md-3 context-column">
            <div id="company-profile" class="mb-4">
                <div class="text-center mb-3">
                    <div id="company-logo" class="mx-auto mb-2">
                        <!-- Company logo placeholder -->
                    </div>
                    <h5 id="company-name"></h5>
                    <p id="company-location"></p>
                </div>
                <div id="company-details">
                    <div id="rating-section" class="mb-2 text-center">
                        <span id="rating-value"></span>
                        <span id="rating-stars"></span>
                        <p id="review-count"></p>
                    </div>
                </div>
            </div>
            <hr>
            <div id="quote-summary">
                <h5 class="mb-3">Quote Summary</h5>
                <dl class="row">
                    <dt class="col-sm-6">Price of System:</dt>
                    <dd class="col-sm-6" id="quote-price"></dd>
                    
                    <dt class="col-sm-6">Model of Hardware:</dt>
                    <dd class="col-sm-6" id="quote-hardware"></dd>
                    
                    <dt class="col-sm-6">Need Met:</dt>
                    <dd class="col-sm-6" id="quote-need-met"></dd>
                    
                    <dt class="col-sm-6">Payback Period:</dt>
                    <dd class="col-sm-6" id="quote-payback"></dd>
                    <dt class="col-sm-6">Funding:</dt>
                    <dd class="col-sm-6" id="quote-funding"></dd>
                </dl>
                <div class="text-center mt-3">
                    <a href="#" id="full-quote-link" class="btn btn-secondary">See Full Quote</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script id="user-data" type="application/json">
    {{ user_data_json|safe }}
</script>
{% endblock %}

{% block extra_js %}

<script src="{% static 'js/app.js' %}"></script>
{% endblock %}